# 程序的机器级表示

1. 机器级编程的两个重要抽象: ISA定义机器级程序的格式和行为，定义了处理器状态; 指令格式; 每条指令对状态的影响; 机器级程序使用的内存地址是虚拟地址，提供的内存模型看上去是一个非常大的字节数组。

x86-64的虚拟地址的高16位必须设置为0，所以访问的地址实际能够指定的是2^48范围内的一个byte。

2. x86-64的任何为寄存器生成32bit值的指令都会把寄存器的高位设置为0

3. 加载有效地址指令`leaq`是`movq`的变形, 并不从内存中读数据，而是将有效地址写入目的操作数。可用于做简单的数学运算。

4. x86-64中还维护着一组单个bit的条件码寄存器: CF, ZF, SF, OF

`leaq` 指令不改变任何条件码 `CMP`指令根据两个操作数之间的差来设置条件码并不更新寄存器。`TEST`的行为和`AND`指令行为一样但并不更新寄存器, 常用于两个操作数相同检验正负, 或进行掩码运算。

条件码一般不会直接读取，常用三种方式访问：

1. 根据条件码的组合将一个字节设置为0/1 (`SET`指令)

2. 可以条件跳转到其他部分程序

3. 可以条件传输数据

